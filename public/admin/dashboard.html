<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - Cafeteca</title>
    <link rel="stylesheet" href="../css/styles.css">
    <link rel="stylesheet" href="css/admin.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="admin-dashboard">
    <div class="admin-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="logo-wrapper">
                    <i class="fas fa-coffee"></i>
                    <h2>Cafeteca</h2>
                </div>
                <p>Panou de administrare</p>
            </div>
            <nav class="sidebar-nav">
                <ul>
                    <li class="active" data-section="dashboard">
                        <a href="#dashboard"><i class="fas fa-home"></i> Dashboard</a>
                    </li>
                    <li data-section="menu">
                        <a href="#menu"><i class="fas fa-utensils"></i> Gestiune Meniu</a>
                    </li>
                    <li data-section="categories">
                        <a href="#categories"><i class="fas fa-tags"></i> Gestiune Categorii</a>
                    </li>
                    <li data-section="events">
                        <a href="#events"><i class="fas fa-calendar-alt"></i> Evenimente</a>
                    </li>
                    <li>
                        <a href="#" id="logoutBtn"><i class="fas fa-sign-out-alt"></i> Deconectare</a>
                    </li>
                </ul>
            </nav>
            <div class="sidebar-footer">
                <div class="user-info">
                    <div class="user-avatar">
                        <i class="fas fa-user-circle"></i>
                    </div>
                    <div class="user-details">
                        <span class="user-name">Administrator</span>
                        <span class="user-role">Admin</span>
                    </div>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Top Navigation -->
            <header class="top-nav">
                <div class="nav-left">
                    <button class="sidebar-toggle">
                        <i class="fas fa-bars"></i>
                    </button>
                    <h1><i class="fas fa-tachometer-alt"></i> <span id="page-title">Dashboard</span></h1>
                </div>
                <div class="nav-right">
                    <div class="user-avatar">
                        <i class="fas fa-user-circle"></i>
                    </div>
                </div>
            </header>

            <!-- Dashboard Content -->
            <div class="content-wrapper">
                <!-- Dashboard Overview -->
                <section id="dashboard-section" class="dashboard-section active">
                    <div class="dashboard-cards">
                        <div class="card">
                            <div class="card-icon" style="background: linear-gradient(135deg, #5e4a3e, #8b5a2b);">
                                <i class="fas fa-coffee"></i>
                            </div>
                            <div class="card-info">
                                <h3>Produse în meniu</h3>
                                <span class="count" id="products-count">0</span>
                                <span class="trend up"><i class="fas fa-coffee"></i> Gestionare</span>
                            </div>
                        </div>
                        <div class="card">
                            <div class="card-icon" style="background: linear-gradient(135deg, #8abf9b, #a5c4b8);">
                                <i class="fas fa-calendar-check"></i>
                            </div>
                            <div class="card-info">
                                <h3>Categorii</h3>
                                <span class="count" id="categories-count">7</span>
                                <span class="trend"><i class="fas fa-tags"></i> Categorii active</span>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Menu Management Section -->
                <section id="menu-section" class="dashboard-section">
                    <div class="section-header">
                        <h2><i class="fas fa-utensils"></i> Gestiune Meniu</h2>
                        <button class="btn btn-primary" id="addProductBtn">
                            <i class="fas fa-plus"></i> Adaugă Produs
                        </button>
                    </div>
                    
                    <div class="table-responsive">
                        <table id="productsTable" class="table table-striped table-hover">
                            <thead class="table-dark">
                                <tr>
                                    <th>Nume</th>
                                    <th>Preț</th>
                                    <th>Categorie</th>
                                    <th>Descriere</th>
                                    <th>Acțiuni</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Products will be loaded here -->
                            </tbody>
                        </table>
                    </div>
                </section>

                <!-- Categories Section -->
                <section id="categories-section" class="dashboard-section">
                    <div class="section-header">
                        <h2><i class="fas fa-tags"></i> Gestiune Categorii</h2>
                        <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addCategoryModal">
                            <i class="fas fa-plus"></i> Adaugă Categorie
                        </button>
                    </div>
                    
                    <div class="table-responsive">
                        <table id="categoriesTable" class="table table-striped table-hover">
                            <thead class="table-dark">
                                <tr>
                                    <th>Nume Categorie</th>
                                    <th>Număr Produse</th>
                                    <th>Acțiuni</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Categories will be loaded here -->
                            </tbody>
                        </table>
                    </div>
                </section>

                <!-- Events Section -->
                <section id="events-section" class="dashboard-section">
                    <div class="section-header">
                        <h2><i class="fas fa-calendar-alt"></i> Gestiune Evenimente</h2>
                        <p>Disponibil în versiunea următoare</p>
                    </div>
                </section>
            </div>
        </main>
    </div>

    <!-- Modal for adding/editing products -->
    <div class="modal fade" id="productModal" tabindex="-1" aria-labelledby="productModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="productModalLabel">Adaugă Produs Nou</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <form id="productForm">
                    <div class="modal-body">
                        <input type="hidden" id="productId" name="productId">
                        <div class="mb-3">
                            <label for="name" class="form-label">Nume produs</label>
                            <input type="text" class="form-control" id="name" name="name" required>
                        </div>
                        <div class="mb-3">
                            <label for="price" class="form-label">Preț (RON)</label>
                            <input type="number" class="form-control" id="price" name="price" step="0.01" min="0" required>
                        </div>
                        <div class="mb-3">
                            <label for="category" class="form-label">Categorie</label>
                            <select class="form-select" id="category" name="category" required>
                                <!-- Categories will be loaded dynamically -->
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="description" class="form-label">Descriere</label>
                            <textarea class="form-control" id="description" name="description" rows="3"></textarea>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Anulează</button>
                        <button type="submit" class="btn btn-primary">Salvează</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Add Category Modal -->
    <div class="modal fade" id="addCategoryModal" tabindex="-1" aria-labelledby="addCategoryModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="addCategoryModalLabel">Adaugă Categorie Nouă</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <form id="addCategoryForm">
                    <div class="modal-body">
                        <div class="mb-3">
                            <label for="categoryName" class="form-label">Nume Categorie</label>
                            <input type="text" class="form-control" id="categoryName" name="name" required>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Anulează</button>
                        <button type="submit" class="btn btn-primary">Salvează</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Edit Category Modal -->
    <div class="modal fade" id="editCategoryModal" tabindex="-1" aria-labelledby="editCategoryModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="editCategoryModalLabel">Editează Categorie</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <form id="editCategoryForm">
                    <div class="modal-body">
                        <div class="mb-3">
                            <label for="editCategoryName" class="form-label">Nume Categorie</label>
                            <input type="text" class="form-control" id="editCategoryName" name="name" required>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Anulează</button>
                        <button type="submit" class="btn btn-primary">Salvează modificările</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="../js/products.js"></script>
    <script src="js/product-manager.js"></script>
    <script src="js/category-manager.js"></script>
    <script>
        // Navigation between sections
        document.addEventListener('DOMContentLoaded', function() {
            // Show the active section based on URL hash or default to dashboard
            function showActiveSection() {
                const hash = window.location.hash || '#dashboard';
                const sectionId = hash.replace('#', '') + '-section';
                const section = document.getElementById(sectionId);
                
                // Hide all sections
                document.querySelectorAll('.dashboard-section').forEach(section => {
                    section.classList.remove('active');
                });
                
                // Remove active class from all nav items
                document.querySelectorAll('.sidebar-nav li').forEach(item => {
                    item.classList.remove('active');
                });
                
                // Show the selected section
                if (section) {
                    section.classList.add('active');
                    document.querySelector(`.sidebar-nav li[data-section="${hash.replace('#', '')}"]`).classList.add('active');
                    document.getElementById('page-title').textContent = section.querySelector('h2').textContent;
                }
            }
            
            // Handle navigation clicks
            document.querySelectorAll('.sidebar-nav a').forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const section = this.parentElement.getAttribute('data-section');
                    window.location.hash = section;
                    showActiveSection();
                });
            });
            
            // Show active section on page load
            showActiveSection();
            
            // Handle window hash change
            window.addEventListener('hashchange', showActiveSection);
            
            // Toggle sidebar on mobile
            document.querySelector('.sidebar-toggle').addEventListener('click', function() {
                document.querySelector('.admin-container').classList.toggle('sidebar-collapsed');
            });
            
            // Logout button
            document.getElementById('logoutBtn').addEventListener('click', function(e) {
                e.preventDefault();
                if (confirm('Sigur doriți să vă deconectați?')) {
                    localStorage.removeItem('admin_logged_in');
                    window.location.href = 'login.html';
                }
            });
            
            // Update dashboard counts
            function updateDashboardCounts() {
                const products = JSON.parse(localStorage.getItem('cafeteca_products') || '[]');
                document.getElementById('products-count').textContent = products.length;
            }
            
            updateDashboardCounts();
        });
    </script>
</body>
</html>
